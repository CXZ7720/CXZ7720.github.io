
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="사다리타기">
    <title>React Native 버그픽스 3분완성 [코드푸시 맛] - 2 - 사다리타기</title>
    <meta name="author" content="zerogyun">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"zerogyun","sameAs":["https://github.com/cxz7720","mailto:admin@zerogyun.dev"],"image":"https://avatars1.githubusercontent.com/u/29659112?s=460&v=4"},"articleBody":"\n\n5. Multi Deployment 구현하기공식 문서에서 제안하는 Production / Staging 트랙의 이상적인 운용은 다음과 같습니다.\n\n열심히 개발한 결과물을 Staging 트랙으로 배포합니다.\nStaging 트랙을 바라보고 있는 앱을 이용해 서버로부터 업데이트 한 후 QA 를 진행하고, 의도대로 동작하는지 검증합니다.\n모든 QA 및 테스팅을 통과했다면 Staging 트랙에 배포된 현 상태를 Production 트랙으로 승격시킵니다.\nProduction 트랙을 바라보고 있는 앱을 이용해 서버로부터 업데이트 한 후, 의도대로 동작하는지 검증합니다.\n\n또는,\n설정 메뉴에 “베타 활성화” 토글 버튼을 추가하여 사용자가 베타기능에 참여할지 여부를 결정하도록 하고, 활성화 여부에 따라 CodePush 키를 동적으로 재정의하여 활성화된 트랙을 변경할 수도 있습니다.\n5-1. Multi Deployment 설정하기(iOS)\nXcode 를 열어 Project Navigator 뷰에서 현재 프로젝트를 선택합니다.\n\nInfo 탭을 클릭합니다.\n\nConfigurations 그룹에서 + 버튼을 눌러 Duplicate &quot;Release&quot; Configuration 옵션을 선택하여 새 항목을 추가합니다.\n\n이름을 Staging 으로 바꿔줍니다.\n\nBuild Settings 탭으로 이동합니다.\n\n‘+’ 버튼을 눌러 Add User-defined Setting 을 선택합니다.\n\nMulti_Deployment_Config 라는 이름으로 변경하고 값으로는$(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME) 을 추가해줍니다.Staging 트랙의 경우 $(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME) 라고 뜨는게 정상이니 안심하세요.\n\n다시 + 버튼을 눌러 Add User-Defined Setting 을 선택해주세요.\n\n이번엔 이름을 CODEPUSH_KEY 라고 해줍니다. 그 다음 드롭다운을 확장하여 각 트랙별로 CodePush키를 넣어줍니다. 키는 이전단계에서 앱센터 웹 대시보드에서 확인했던 그 값을 넣어주세요. \n\n마지막으로 Info.plist 로 돌아와서 이전단계에서 만들었던 CodePushDeploymentKey 라는 항목을 찾고 값을 $(CODEPUSH_KEY) 로 변경해주면 됩니다.\n\n\n5-2. Multi Deployment 구현하기 (Android)먼저 Android Studio에서 android/app/build.gradle 파일을 열어줍니다.그 중에서 buildTypes 항목을 찾아서 아래와 같이 고쳐줍니다.\n12345678910111213141516171819202122232425262728android &#123;    ...    buildTypes &#123;        debug &#123;            ...            // Note: CodePush updates should not be tested in Debug mode as they are overriden by the RN packager. However, because CodePush checks for updates in all modes, we must supply a key.            resValue \"string\", \"CodePushDeploymentKey\", '\"\"'            ...        &#125;        releaseStaging &#123;            ...            resValue \"string\", \"CodePushDeploymentKey\", '\"&lt;INSERT_STAGING_KEY&gt;\"'            // Note: It is a good idea to provide matchingFallbacks for the new buildType you create to prevent build issues            // Add the following line if not already there            matchingFallbacks = ['release']            ...        &#125;        release &#123;            ...            resValue \"string\", \"CodePushDeploymentKey\", '\"&lt;INSERT_PRODUCTION_KEY&gt;\"'            ...        &#125;    &#125;    ...&#125;\n\ndebug 타입에는 아무런 키를 넣지 않고, releaseStaging 에는 Staging 키를, release 타입에는 production 키를 넣어줍니다.\n\n💡Staging 타입의 이름이 굳이 releaseStaging 인 이유는 이 라인 때문입니다.\n\n6. codePush 컴포넌트 삽입드디어 길고 긴 네이티브 코드 수정이 끝났습니다.본격적으로 React Natve 를 이용해서 CodePush 플러그인을 호출하고 앱을 업데이트 하는 로직을 만들어봅니다.\n모든 단계는 Functional Component 형태를 기준으로 설명합니다.\n먼저 프로젝트의 root component 를  codePush 컴포넌트로 감싸줍니다.보통 대부분 프로젝트의 root component 는 App.tsx 의 &lt;App /&gt; 컴포넌트입니다.\nApp.tsx1234567import codePush from \"react-native-code-push\";const App =() =&gt; &#123;// your code here&#125;export default codePush(App);\n\n이 CodePush 고차 컴포넌트(Higher order component) 로 App 컴포넌트를 감싸야 정상적으로 CodePush API 의 프로세스가 동작합니다.\n\n💡 기본적으로 이 고차 컴포넌트는 코드푸시를 이용한 sync, sendResult, rollBack 등등 을 수행할 수 있게 합니다. 만약 이를 사용하지 않으면 일련의 과정 중 어딘가가 박살나게 될 겁니다.이렇게 강조하는 이유는 제가 직접 해봤기 때문이죠.. 🤯🤯예를 들어, CodePush 컴포넌트를 제외하고 강제로 Sync 메소드를 호출하면 정상적으로 JS 번들을 가져오는 것처럼 보이나, AppCenter 로 설치완료에 대한 Report를 하지 못하여 무한 업데이트에 빠지고 맙니다.\n\n이 정도 설정만으로도 CodePush는 동작합니다. 자동으로 AppCenter 서버에서 최신 패키지를 가져오고 설치합니다.만약 이걸 원치 않는다면 직접 설정값을 넘겨주면됩니다\n사용 가능한 옵션으로는 checkFrequency, deploymentKey, installMode, mandatoryInstallMode, minimumBackgroundDuration, updateDialog, rollbackRetryOptions 가 있습니다.\n12345678import codePush from \"react-native-code-push\";let codePushOptions = &#123; checkFrequency: codePush.CheckFrequency.ON_APP_RESUME &#125;;const App =() =&gt; &#123;// your code here&#125;export default codePush(codePushOptions)(App);\n\n\n7. 업데이트 로직 정의하기옵션을 잘 설정한다면 다양한 방식으로 업데이트를 제공할 수 있습니다.저희 프로덕트 경우\n\n앱 초기로딩시 업데이트의 존재 유무를 확인하고,\n가능한 업데이트가 있다면 사용자에게 팝업을 띄워 동의를 요청합니다.\n그 후, 업데이트 페이지로 넘어가서 sync 를 진행합니다.\n다운로드가 완료되면 즉시 JS 번들을 교체하고 앱을 재실행합니다.\n\n\n🚧 주의 개발자가 Codepush 업데이트 로직을 재 정의할 경우, 가장 먼저  checkFrequency 를 MANUAL 로 설정해야 합니다. 그래야 뒤에서 직접 Sync() 메소드를 이용해서 컨트롤 할 수 있게 됩니다. 만약  ON_APP_START 또는, ON_APP_RESUME 로 둘 경우 App 컴포넌트를 감싼 CodePush 컴포넌트가 자동으로 수행하는 업데이트 로직과 개발자가 재정의한 업데이트 로직이 충돌하게 됩니다.\n\n업데이트 존재 유무 확인codePush.checkForUpdate() 메소드를 이용해서 확인합니다. 업데이트가 존재한다면 Object를, 가용 업데이트가 존재하지 않는다면 Null 을 리턴합니다.\n주의할 점은 업데이트가 존재하지만 RollBack 등의 사유로 인하여 설치를 보류한 경우에도 Object 를 리턴하니 세심하게 경우의 수를 나눠서 조건처리를 해야 합니다.\n\n🚧 당신도 AppCenter 에 담겨질 수 있습니다. 우리 마소 서버는 생각보다 개복치와 같아서 꽤나 자주 장애를 일으킵니다. AppCenter 의 장애는 광역기라서 대부분의 과정에 영향을 미칩니다. 예를들어 개발팀에서 새 패치를 배포할때나, 클라이언트에서 업데이트 가용성을 검사하거나, 패키지를 다운로드 할때 등이 있습니다. 적절히 try-catch 로 Error Handling 하지 않는다면 우리 앱도 개복치가 될 수 있습니다.저희 팀에서는 Maximum delay 를 10초로 두고 그 이상이 되면 Promise reject 를 하여 해당 과정을 건너뛰도록 하고 있습니다.개복치 MS 서버의 건강상태가 궁금하신 분은 https://status.appcenter.ms/ 에서 상황을 확인할 수 있습니다.\n\n업데이트 시작 및 요청 팝업 띄우기codePush.sync() 메소드를 이용하여 업데이트 패키지의 다운로드 및 업데이트 설치까지 한번에 진행할 수 있습니다.사용법은 다음과 같습니다.\n123456codePush.sync(&#123;\toptions: SyncOptions,\tsyncStatusChangedCallback : SyncStatusChangedCallback,\tdownloadProgressCallback: DownloadProgressCallback,\thandleBinaryVersionMismatchCallback: HandleBinaryVersionMismatchCallback&#125;)\n\n\noptions : end-user의 업데이트 환경을 정의합니다. 업데이트 다이얼로그, 설치시점 등이 여기에 해당합니다. syncOptions 타입의 객체를 가지며 syncOption 으로는 deploymentKey, installMode, mandatoryInstallMode, minimumBackgroundDuration, updateDialog 가 있습니다.\nsyncStatusChangedCallback : 설치 단계의 진행에 따른 콜백입니다. UP_TO_DATE, UPDATE_INSTALLED, UPDATE_IGNORED, UNKNOWN_ERROR, SYNC_IN_PROGRESS, CHECKING_FOR_UPDATE, DOWNLOADING_PACKAGE, INSTALLING_UPDATE 의 타입을 가집니다.\ndownloadProgressCallback : 다운로드 진행상황에 대한 콜백입니다. DownloadProgress 타입의 객체를 리턴하며 {totalBytes : number, receivedBytes: number} 형태로 되어있습니다.저희 회사 앱에서는 React-Native-Progress 패키지와 연동하여 다운로드 진행 바를 출력하는데 이용합니다.\ntargetBinaryMismatchCallback : 바이너리 버전이 일치하지 않을때 호출됩니다.\n\n업데이트 시작 전 사용자에게 확인창을 띄우려면 options 파라미터에 updateDialog 객체를 선언해주면 확인 팝업을 설정할 수 있습니다.\n조금 복잡하지만, 결국 최종적으로 완성된 sync() 메소드는 아래와 같은 형태입니다.\njsx123456789101112131415161718await codePush.sync(    &#123;        updateDialog: &#123;  //업데이트 다이얼로그 설정          title: t('update:UPDATE_DIALOG_TITLE'),          optionalUpdateMessage: t('update:UPDATE_DIALOG_BODY'),          optionalIgnoreButtonLabel: t('common:LATER'),          optionalInstallButtonLabel: t('update:UPDATE'),          mandatoryContinueButtonLabel: t('update:UPDATE'),          mandatoryUpdateMessage: t('update:MANDATORY_UPDATE_DIALOG_BODY'),        &#125;,        installMode: codePush.InstallMode.IMMEDIATE,      &#125;,      undefined,      (progress) =&gt; setProgress(progress),      (e) =&gt; &#123;        console.error('Target binary version mismatch', e)      &#125;  )\n\n설정은 정말 모든것이 끝났습니다.이제 잘 돌아가는지 확인하러 갑시다.\n8. 릴리즈릴리즈는 AppCenter CLI 를 통해 할 수 있습니다.만약 AppCenter CLI 를 아직 설치하지 않았다면 https://github.com/microsoft/appcenter-cli 에서 dev-dependency 또는 global install 해주신 뒤 기본적인 로그인 절차를 진행하면 됩니다.\n릴리즈 명령어는 다음과 같은 구조로 되어있습니다.yarn appcenter codepush release-react -a &lt;조직 또는 이름&gt;/&lt;프로젝트명&gt; -d &lt;디플로이 타겟&gt; --plist-file &lt;ios일 경우에만, Info.plist파일위치 - 보통은 ios/RN프로젝트이름/Info.plist&gt; --description &lt;&quot;여기에 설명입력&quot;&gt;\n예를들어서 Android 프로젝트를 Staging 트랙으로 배포한다면,\n1yarn appcenter codepush release-react -a JohnDoe/SampleAndroid -d Staging --description \"CodePush Works!\" --mandatory\n와 같은 형태가 됩니다.\nIOS 프로젝트를 Production 트랙으로 배포한다면\n1yarn appcenter codepush release-react -a JohnDoe/SampleIos -d Production --plist-file ios/HelloCodePush/Info.plist --description \"CodePush Works!\" --mandatory\n가 됩니다.\n명령어 맨 마지막에 붙은 —mandatory 파라미터는 사용자에게 업데이트를 강제하도록 하는 설정입니다. 이 옵션이 붙은 배포는 설치 알림 다이얼로그에 취소 버튼이 존재하지 않습니다.간단한 빌드과정이 지나고, MS 서버에 업로드가 완료되면 AppCenter 대시보드에서 현황을 확인할 수 있습니다.\n9. 심화편복수의 트랙을 운용하는 방법으로는 내부 개발용으로 사용하는 것 이외에도, 베타 테스터용 트랙으로 활용할 수도 있습니다. 설정페이지 등에서 토글 버튼으로 사용자가 직접 Opt-In 할 수 있도록 하는 옵션을 두고, 활성화 여부에 따라 동적으로 CodePush Token 을 변경한다면 베타테스트 프로그램을 보다 쉽게 운용할 수 있게 됩니다.\n단, 주의할 점은 Opt-Out 한다고 해서 무조건 바뀐 버전의 업데이트를 다시 가져오는 것은 아닙니다. 해당 기기가 변경된 트랙의 최신판을 성공적으로 설치 한 기록이 존재하지 않을때에만 새 업데이트를 가져옵니다.\n설명이 조금 어려울 수도 있는데, Apple 기기의 베타프로그램 운영 방식을 상상하시면 비슷합니다.\n\nStaging 최신 : V2, Production 최신 : V2 라고 가정.\nProduction V2 → Staging 트랙으로 변경한 경우 : Staging V2 업데이트 진행.\n이 사용자가 Opt-Out 하여 다시 Production 채널로 돌아올 경우 :기존에 Production V2를 설치(실행)했던 기록이 있으므로 바라보는 채널은 바뀌었지만 해당 채널의 최신 번들을 가져오지 않음.(기존 Staging 번들을 그대로 유지하고 있음)\n이후 Production 에서 V3가 릴리즈 된 경우에 업데이트를 수신하게 되고, 완전히 Staging 소프트웨어를 벗어나게 됨.\n\n10. 마무리CodePush 는 React Native 앱에 있어서 정말 가뭄의 단비와도 같은 기능입니다.Codepush가 없었더라면 매 번 스토어를 통해 수많은 버그들을 수정한 앱 버전의 심사를 올리고, 심사가 끝날 때 까지 마음졸이며 기다려야 했을 겁니다.\n저희 팀은 CodePush 를 이용한 패치를 일주일 주기로 내보내고 있습니다. 어떤 주는 UI 수정을 할 때도 있고, 어떤 주는 버그를 고칠때도 있습니다. 리액트 네이티브를 개발해보신 분들은 알겠지만, 일단 네이티브 의존성을 가지는 패키지들을 설치해두기만 하면 개발의 80% 이상은 JS/TS 를 이용하여 만들어 나갈 수 있습니다. 때문에 네이티브 패키지가 이미 심어져 있기만 하다면 아무리 복잡한 컴포넌트를 수정하는 일도 문제가 없습니다.\nMicrosoft Azure 를 기반으로 운영되기때문에 배포도 꽤나 빨라서 LTE 환경에서 30MB 정도 되는 번들을 받는데 2~3초면 충분합니다. 다만, 유일한 흠은 Microsoft AppCenter 서버가 종종 아프다는 것 정도가 되겠습니다.\n구성이 조금 복잡해 보이지만, 그래도 CodePush 가 선녀임에는 틀림없습니다.","dateCreated":"2021-07-15T15:11:25+09:00","dateModified":"2021-07-15T16:36:18+09:00","datePublished":"2021-07-15T15:11:25+09:00","description":"React Native 기반 앱의 변경사항을 앱스토어 심사 없이 CodePush 를 이용하여 빠르게 패치하는 방법에 대하여 알아봅니다.","headline":"React Native 버그픽스 3분완성 [코드푸시 맛] - 2","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/"},"publisher":{"@type":"Organization","name":"zerogyun","sameAs":["https://github.com/cxz7720","mailto:admin@zerogyun.dev"],"image":"https://avatars1.githubusercontent.com/u/29659112?s=460&v=4","logo":{"@type":"ImageObject","url":"https://avatars1.githubusercontent.com/u/29659112?s=460&v=4"}},"url":"https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/","keywords":"React Native, React, CodePush, AppCenter"}</script>
    <meta name="description" content="React Native 기반 앱의 변경사항을 앱스토어 심사 없이 CodePush 를 이용하여 빠르게 패치하는 방법에 대하여 알아봅니다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="React Native 버그픽스 3분완성 [코드푸시 맛] - 2">
<meta property="og:url" content="https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/index.html">
<meta property="og:site_name" content="사다리타기">
<meta property="og:description" content="React Native 기반 앱의 변경사항을 앱스토어 심사 없이 CodePush 를 이용하여 빠르게 패치하는 방법에 대하여 알아봅니다.">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://user-images.githubusercontent.com/29659112/125744653-50e4a2b0-0ccd-4647-9448-f02e9a354d65.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/29659112/125744750-3c111c2e-fd32-415d-bd67-0e6fe3757068.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/29659112/125744937-a7b743c9-b7f1-4237-860a-d5820badedfd.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/29659112/125747697-122f88b7-1ac9-4726-a9a6-24e7a78804dd.png">
<meta property="article:published_time" content="2021-07-15T06:11:25.000Z">
<meta property="article:modified_time" content="2021-07-15T07:36:18.805Z">
<meta property="article:author" content="zerogyun">
<meta property="article:tag" content="React Native">
<meta property="article:tag" content="React">
<meta property="article:tag" content="CodePush">
<meta property="article:tag" content="AppCenter">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/29659112/125744653-50e4a2b0-0ccd-4647-9448-f02e9a354d65.png">
    
    
        
    
    
        <meta property="og:image" content="https://avatars1.githubusercontent.com/u/29659112?s=460&amp;v=4">
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-pkzfofacyjs4ocdvjxdd0vvkiddzycugzbe4bdwn09zu5qd5qxlrnik11soo.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-126694602-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-126694602-3');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/" aria-label>
            사다리타기
        </a>
    </div>
    
        
            <a class="header-right-picture " href="#about" aria-label="링크 열기: /#about">
        
        
            <img class="header-picture" src="https://avatars1.githubusercontent.com/u/29659112?s=460&amp;v=4" alt="저자 이미지">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about" aria-label="저자에 대해 더 알아보기">
                    <img class="sidebar-profile-picture" src="https://avatars1.githubusercontent.com/u/29659112?s=460&amp;v=4" alt="저자 이미지">
                </a>
                <h4 class="sidebar-profile-name">zerogyun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/" rel="noopener" title="Home">
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" rel="noopener" title="카테고리">
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" rel="noopener" title="태그">
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://zerogyun.dev/resume/" rel="noopener" title="About">
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/cxz7720" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:admin@zerogyun.dev" target="_blank" rel="noopener" title="Mail">
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2" class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            React Native 버그픽스 3분완성 [코드푸시 맛] - 2
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2021-07-15T15:11:25+09:00">
	
		    2021/07/15
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt -->

<h2 id="5-Multi-Deployment-구현하기"><a href="#5-Multi-Deployment-구현하기" class="headerlink" title="5. Multi Deployment 구현하기"></a>5. Multi Deployment 구현하기</h2><p>공식 문서에서 제안하는 Production / Staging 트랙의 이상적인 운용은 다음과 같습니다.</p>
<ol>
<li>열심히 개발한 결과물을 <code>Staging</code> 트랙으로 배포합니다.</li>
<li>Staging 트랙을 바라보고 있는 앱을 이용해 서버로부터 업데이트 한 후 QA 를 진행하고, 의도대로 동작하는지 검증합니다.</li>
<li>모든 QA 및 테스팅을 통과했다면 Staging 트랙에 배포된 현 상태를 <code>Production</code> 트랙으로 승격시킵니다.</li>
<li>Production 트랙을 바라보고 있는 앱을 이용해 서버로부터 업데이트 한 후, 의도대로 동작하는지 검증합니다.</li>
</ol>
<p>또는,</p>
<p>설정 메뉴에 “베타 활성화” 토글 버튼을 추가하여 사용자가 베타기능에 참여할지 여부를 결정하도록 하고, 활성화 여부에 따라 CodePush 키를 동적으로 재정의하여 활성화된 트랙을 변경할 수도 있습니다.</p>
<h2 id="5-1-Multi-Deployment-설정하기-iOS"><a href="#5-1-Multi-Deployment-설정하기-iOS" class="headerlink" title="5-1. Multi Deployment 설정하기(iOS)"></a>5-1. Multi Deployment 설정하기(iOS)</h2><ol>
<li><p>Xcode 를 열어 Project Navigator 뷰에서 현재 프로젝트를 선택합니다.</p>
</li>
<li><p>Info 탭을 클릭합니다.</p>
</li>
<li><p>Configurations 그룹에서 + 버튼을 눌러 <code>Duplicate &quot;Release&quot; Configuration</code> 옵션을 선택하여 새 항목을 추가합니다.<br><img src="https://user-images.githubusercontent.com/29659112/125744653-50e4a2b0-0ccd-4647-9448-f02e9a354d65.png" alt="image"></p>
</li>
<li><p>이름을 <code>Staging</code> 으로 바꿔줍니다.</p>
</li>
<li><p>Build Settings 탭으로 이동합니다.</p>
</li>
<li><p>‘+’ 버튼을 눌러 Add User-defined Setting 을 선택합니다.<br><img src="https://user-images.githubusercontent.com/29659112/125744750-3c111c2e-fd32-415d-bd67-0e6fe3757068.png" alt="image"></p>
</li>
<li><p>Multi_Deployment_Config 라는 이름으로 변경하고 값으로는<code>$(BUILD_DIR)/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)</code> 을 추가해줍니다.<br>Staging 트랙의 경우 <code>$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)</code> 라고 뜨는게 정상이니 안심하세요.</p>
</li>
<li><p>다시 + 버튼을 눌러 Add User-Defined Setting 을 선택해주세요.</p>
</li>
<li><p>이번엔 이름을 <code>CODEPUSH_KEY</code> 라고 해줍니다. 그 다음 드롭다운을 확장하여 각 트랙별로 CodePush키를 넣어줍니다. 키는 이전단계에서 앱센터 웹 대시보드에서 확인했던 그 값을 넣어주세요.<br> <img src="https://user-images.githubusercontent.com/29659112/125744937-a7b743c9-b7f1-4237-860a-d5820badedfd.png" alt="image"></p>
</li>
<li><p>마지막으로 <code>Info.plist</code> 로 돌아와서 이전단계에서 만들었던 <code>CodePushDeploymentKey</code> 라는 항목을 찾고 값을 <code>$(CODEPUSH_KEY)</code> 로 변경해주면 됩니다.</p>
</li>
</ol>
<h2 id="5-2-Multi-Deployment-구현하기-Android"><a href="#5-2-Multi-Deployment-구현하기-Android" class="headerlink" title="5-2. Multi Deployment 구현하기 (Android)"></a>5-2. Multi Deployment 구현하기 (Android)</h2><p>먼저 Android Studio에서 <code>android/app/build.gradle</code> 파일을 열어줍니다.<br>그 중에서 <code>buildTypes</code> 항목을 찾아서 아래와 같이 고쳐줍니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="comment">// Note: CodePush updates should not be tested in Debug mode as they are overriden by the RN packager. However, because CodePush checks for updates in all modes, we must supply a key.</span></span><br><span class="line">            resValue <span class="string">"string"</span>, <span class="string">"CodePushDeploymentKey"</span>, <span class="string">'""'</span></span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        releaseStaging &#123;</span><br><span class="line">            ...</span><br><span class="line">            resValue <span class="string">"string"</span>, <span class="string">"CodePushDeploymentKey"</span>, <span class="string">'"&lt;INSERT_STAGING_KEY&gt;"'</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// Note: It is a good idea to provide matchingFallbacks for the new buildType you create to prevent build issues</span></span><br><span class="line">            <span class="comment">// Add the following line if not already there</span></span><br><span class="line">            matchingFallbacks = [<span class="string">'release'</span>]</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        release &#123;</span><br><span class="line">            ...</span><br><span class="line">            resValue <span class="string">"string"</span>, <span class="string">"CodePushDeploymentKey"</span>, <span class="string">'"&lt;INSERT_PRODUCTION_KEY&gt;"'</span></span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>debug 타입에는 아무런 키를 넣지 않고, releaseStaging 에는 Staging 키를, release 타입에는 production 키를 넣어줍니다.</p>
<blockquote>
<p>💡Staging 타입의 이름이 굳이 releaseStaging 인 이유는 <a href="https://github.com/facebook/react-native/blob/e083f9a139b3f8c5552528f8f8018529ef3193b9/react.gradle#L79" target="_blank" rel="external nofollow noopener noreferrer">이 라인</a> 때문입니다.</p>
</blockquote>
<h2 id="6-codePush-컴포넌트-삽입"><a href="#6-codePush-컴포넌트-삽입" class="headerlink" title="6. codePush 컴포넌트 삽입"></a>6. codePush 컴포넌트 삽입</h2><p>드디어 길고 긴 네이티브 코드 수정이 끝났습니다.<br>본격적으로 React Natve 를 이용해서 CodePush 플러그인을 호출하고 앱을 업데이트 하는 로직을 만들어봅니다.</p>
<p>모든 단계는 Functional Component 형태를 기준으로 설명합니다.</p>
<p>먼저 프로젝트의 root component 를  codePush 컴포넌트로 감싸줍니다.<br>보통 대부분 프로젝트의 root component 는 <code>App.tsx</code> 의 <code>&lt;App /&gt;</code> 컴포넌트입니다.</p>
<figure class="highlight typescript"><figcaption><span>App.tsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">"react-native-code-push"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App =<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// your code here</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> codePush(App);</span><br></pre></td></tr></table></figure>

<p>이 CodePush 고차 컴포넌트(Higher order component) 로 App 컴포넌트를 감싸야 정상적으로 CodePush API 의 프로세스가 동작합니다.</p>
<blockquote>
<p>💡 기본적으로 이 고차 컴포넌트는 코드푸시를 이용한 sync, sendResult, rollBack 등등 을 수행할 수 있게 합니다. 만약 이를 사용하지 않으면 일련의 과정 중 어딘가가 박살나게 될 겁니다.<br>이렇게 강조하는 이유는 제가 직접 해봤기 때문이죠.. 🤯🤯<br><br>예를 들어, CodePush 컴포넌트를 제외하고 강제로 Sync 메소드를 호출하면 정상적으로 JS 번들을 가져오는 것처럼 보이나, AppCenter 로 설치완료에 대한 Report를 하지 못하여 무한 업데이트에 빠지고 맙니다.</p>
</blockquote>
<p>이 정도 설정만으로도 CodePush는 동작합니다. 자동으로 AppCenter 서버에서 최신 패키지를 가져오고 설치합니다.<br>만약 이걸 원치 않는다면 직접 설정값을 넘겨주면됩니다</p>
<p>사용 가능한 옵션으로는 <code>checkFrequency</code>, <code>deploymentKey</code>, <code>installMode</code>, <code>mandatoryInstallMode</code>, <code>minimumBackgroundDuration</code>, <code>updateDialog</code>, <code>rollbackRetryOptions</code> 가 있습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> codePush <span class="keyword">from</span> <span class="string">"react-native-code-push"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> codePushOptions = &#123; checkFrequency: codePush.CheckFrequency.ON_APP_RESUME &#125;;</span><br><span class="line"><span class="keyword">const</span> App =<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// your code here</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> codePush(codePushOptions)(App);</span><br></pre></td></tr></table></figure>


<h2 id="7-업데이트-로직-정의하기"><a href="#7-업데이트-로직-정의하기" class="headerlink" title="7. 업데이트 로직 정의하기"></a>7. 업데이트 로직 정의하기</h2><p>옵션을 잘 설정한다면 다양한 방식으로 업데이트를 제공할 수 있습니다.<br>저희 프로덕트 경우</p>
<ol>
<li>앱 초기로딩시 업데이트의 존재 유무를 확인하고,</li>
<li>가능한 업데이트가 있다면 사용자에게 팝업을 띄워 동의를 요청합니다.</li>
<li>그 후, 업데이트 페이지로 넘어가서 sync 를 진행합니다.</li>
<li>다운로드가 완료되면 즉시 JS 번들을 교체하고 앱을 재실행합니다.</li>
</ol>
<blockquote>
<p>🚧 주의 <br><br>개발자가 Codepush 업데이트 로직을 재 정의할 경우, 가장 먼저  <code>checkFrequency</code> 를 <code>MANUAL</code> 로 설정해야 합니다. 그래야 뒤에서 직접 Sync() 메소드를 이용해서 컨트롤 할 수 있게 됩니다. 만약  <code>ON_APP_START</code> 또는, <code>ON_APP_RESUME</code> 로 둘 경우 App 컴포넌트를 감싼 CodePush 컴포넌트가 자동으로 수행하는 업데이트 로직과 개발자가 재정의한 업데이트 로직이 충돌하게 됩니다.</p>
</blockquote>
<h4 id="업데이트-존재-유무-확인"><a href="#업데이트-존재-유무-확인" class="headerlink" title="업데이트 존재 유무 확인"></a><strong><em>업데이트 존재 유무 확인</em></strong></h4><p><code>codePush.checkForUpdate()</code> 메소드를 이용해서 확인합니다. 업데이트가 존재한다면 Object를, 가용 업데이트가 존재하지 않는다면 Null 을 리턴합니다.</p>
<p>주의할 점은 업데이트가 존재하지만 RollBack 등의 사유로 인하여 설치를 보류한 경우에도 Object 를 리턴하니 세심하게 경우의 수를 나눠서 조건처리를 해야 합니다.</p>
<blockquote>
<p>🚧 당신도 AppCenter 에 담겨질 수 있습니다. <br><br>우리 마소 서버는 생각보다 개복치와 같아서 꽤나 자주 장애를 일으킵니다. AppCenter 의 장애는 광역기라서 대부분의 과정에 영향을 미칩니다. 예를들어 개발팀에서 새 패치를 배포할때나, 클라이언트에서 업데이트 가용성을 검사하거나, 패키지를 다운로드 할때 등이 있습니다.<br> 적절히 try-catch 로 Error Handling 하지 않는다면 우리 앱도 개복치가 될 수 있습니다.<br>저희 팀에서는 Maximum delay 를 10초로 두고 그 이상이 되면 Promise reject 를 하여 해당 과정을 건너뛰도록 하고 있습니다.<br>개복치 MS 서버의 건강상태가 궁금하신 분은 <a href="https://status.appcenter.ms/" target="_blank" rel="external nofollow noopener noreferrer">https://status.appcenter.ms/</a> 에서 상황을 확인할 수 있습니다.</p>
</blockquote>
<h4 id="업데이트-시작-및-요청-팝업-띄우기"><a href="#업데이트-시작-및-요청-팝업-띄우기" class="headerlink" title="업데이트 시작 및 요청 팝업 띄우기"></a><strong><em>업데이트 시작 및 요청 팝업 띄우기</em></strong></h4><p>codePush.sync() 메소드를 이용하여 업데이트 패키지의 다운로드 및 업데이트 설치까지 한번에 진행할 수 있습니다.<br>사용법은 다음과 같습니다.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">codePush.sync(&#123;</span><br><span class="line">	options: SyncOptions,</span><br><span class="line">	syncStatusChangedCallback : SyncStatusChangedCallback,</span><br><span class="line">	downloadProgressCallback: DownloadProgressCallback,</span><br><span class="line">	handleBinaryVersionMismatchCallback: HandleBinaryVersionMismatchCallback</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>options</strong> : end-user의 업데이트 환경을 정의합니다. 업데이트 다이얼로그, 설치시점 등이 여기에 해당합니다. <code>syncOptions</code> 타입의 객체를 가지며 syncOption 으로는 <code>deploymentKey</code>, <code>installMode</code>, <code>mandatoryInstallMode</code>, <code>minimumBackgroundDuration</code>, <code>updateDialog</code> 가 있습니다.</li>
<li><strong>syncStatusChangedCallback</strong> : 설치 단계의 진행에 따른 콜백입니다. <code>UP_TO_DATE</code>, <code>UPDATE_INSTALLED</code>, <code>UPDATE_IGNORED</code>, <code>UNKNOWN_ERROR</code>, <code>SYNC_IN_PROGRESS</code>, <code>CHECKING_FOR_UPDATE</code>, <code>DOWNLOADING_PACKAGE</code>, <code>INSTALLING_UPDATE</code> 의 타입을 가집니다.</li>
<li><strong>downloadProgressCallback</strong> : 다운로드 진행상황에 대한 콜백입니다. <code>DownloadProgress</code> 타입의 객체를 리턴하며 <code>{totalBytes : number, receivedBytes: number}</code> 형태로 되어있습니다.<br>저희 회사 앱에서는 <code>React-Native-Progress</code> 패키지와 연동하여 다운로드 진행 바를 출력하는데 이용합니다.</li>
<li><strong>targetBinaryMismatchCallback</strong> : 바이너리 버전이 일치하지 않을때 호출됩니다.</li>
</ul>
<p>업데이트 시작 전 사용자에게 확인창을 띄우려면 <code>options</code> 파라미터에 <code>updateDialog</code> 객체를 선언해주면 확인 팝업을 설정할 수 있습니다.</p>
<p>조금 복잡하지만, 결국 최종적으로 완성된 sync() 메소드는 아래와 같은 형태입니다.</p>
<figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> codePush.sync(</span><br><span class="line">    &#123;</span><br><span class="line">        updateDialog: &#123;  <span class="comment">//업데이트 다이얼로그 설정</span></span><br><span class="line">          title: t(<span class="string">'update:UPDATE_DIALOG_TITLE'</span>),</span><br><span class="line">          optionalUpdateMessage: t(<span class="string">'update:UPDATE_DIALOG_BODY'</span>),</span><br><span class="line">          optionalIgnoreButtonLabel: t(<span class="string">'common:LATER'</span>),</span><br><span class="line">          optionalInstallButtonLabel: t(<span class="string">'update:UPDATE'</span>),</span><br><span class="line">          mandatoryContinueButtonLabel: t(<span class="string">'update:UPDATE'</span>),</span><br><span class="line">          mandatoryUpdateMessage: t(<span class="string">'update:MANDATORY_UPDATE_DIALOG_BODY'</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">        installMode: codePush.InstallMode.IMMEDIATE,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">undefined</span>,</span><br><span class="line">      (progress) =&gt; setProgress(progress),</span><br><span class="line">      (e) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">'Target binary version mismatch'</span>, e)</span><br><span class="line">      &#125;</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<p>설정은 정말 모든것이 끝났습니다.<br>이제 잘 돌아가는지 확인하러 갑시다.</p>
<h2 id="8-릴리즈"><a href="#8-릴리즈" class="headerlink" title="8. 릴리즈"></a>8. 릴리즈</h2><p>릴리즈는 AppCenter CLI 를 통해 할 수 있습니다.<br>만약 AppCenter CLI 를 아직 설치하지 않았다면 <a href="https://github.com/microsoft/appcenter-cli" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/microsoft/appcenter-cli</a> 에서 dev-dependency 또는 global install 해주신 뒤 기본적인 로그인 절차를 진행하면 됩니다.</p>
<p>릴리즈 명령어는 다음과 같은 구조로 되어있습니다.<br><code>yarn appcenter codepush release-react -a &lt;조직 또는 이름&gt;/&lt;프로젝트명&gt; -d &lt;디플로이 타겟&gt; --plist-file &lt;ios일 경우에만, Info.plist파일위치 - 보통은 ios/RN프로젝트이름/Info.plist&gt; --description &lt;&quot;여기에 설명입력&quot;&gt;</code></p>
<p>예를들어서 Android 프로젝트를 Staging 트랙으로 배포한다면,</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn appcenter codepush release-react -a JohnDoe/SampleAndroid -d Staging --description "CodePush Works!" --mandatory</span><br></pre></td></tr></table></figure>
<p>와 같은 형태가 됩니다.</p>
<p>IOS 프로젝트를 Production 트랙으로 배포한다면</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn appcenter codepush release-react -a JohnDoe/SampleIos -d Production --plist-file ios/HelloCodePush/Info.plist --description "CodePush Works!" --mandatory</span><br></pre></td></tr></table></figure>
<p>가 됩니다.</p>
<p>명령어 맨 마지막에 붙은 <code>—mandatory</code> 파라미터는 사용자에게 업데이트를 강제하도록 하는 설정입니다. 이 옵션이 붙은 배포는 설치 알림 다이얼로그에 취소 버튼이 존재하지 않습니다.<br>간단한 빌드과정이 지나고, MS 서버에 업로드가 완료되면 AppCenter 대시보드에서 현황을 확인할 수 있습니다.<br><img width="2576" alt="codepush" src="https://user-images.githubusercontent.com/29659112/125747697-122f88b7-1ac9-4726-a9a6-24e7a78804dd.png"></p>
<h2 id="9-심화편"><a href="#9-심화편" class="headerlink" title="9. 심화편"></a>9. 심화편</h2><p>복수의 트랙을 운용하는 방법으로는 내부 개발용으로 사용하는 것 이외에도, 베타 테스터용 트랙으로 활용할 수도 있습니다. 설정페이지 등에서 토글 버튼으로 사용자가 직접 Opt-In 할 수 있도록 하는 옵션을 두고, 활성화 여부에 따라 동적으로 CodePush Token 을 변경한다면 베타테스트 프로그램을 보다 쉽게 운용할 수 있게 됩니다.</p>
<p>단, 주의할 점은 Opt-Out 한다고 해서 무조건 바뀐 버전의 업데이트를 다시 가져오는 것은 아닙니다. <strong>해당 기기가 변경된 트랙의 최신판을 성공적으로 설치 한 기록이 존재하지 않을때에만</strong> 새 업데이트를 가져옵니다.</p>
<p>설명이 조금 어려울 수도 있는데, Apple 기기의 베타프로그램 운영 방식을 상상하시면 비슷합니다.</p>
<ul>
<li>Staging 최신 : V2, Production 최신 : V2 라고 가정.</li>
<li>Production V2 → Staging 트랙으로 변경한 경우 : Staging V2 업데이트 진행.</li>
<li>이 사용자가 Opt-Out 하여 다시 Production 채널로 돌아올 경우 :<br>기존에 Production V2를 설치(실행)했던 기록이 있으므로 바라보는 채널은 바뀌었지만 해당 채널의 최신 번들을 가져오지 않음.(기존 Staging 번들을 그대로 유지하고 있음)</li>
<li>이후 Production 에서 V3가 릴리즈 된 경우에 업데이트를 수신하게 되고, 완전히 Staging 소프트웨어를 벗어나게 됨.</li>
</ul>
<h2 id="10-마무리"><a href="#10-마무리" class="headerlink" title="10. 마무리"></a>10. 마무리</h2><p>CodePush 는 React Native 앱에 있어서 정말 가뭄의 단비와도 같은 기능입니다.<br>Codepush가 없었더라면 매 번 스토어를 통해 수많은 버그들을 수정한 앱 버전의 심사를 올리고, 심사가 끝날 때 까지 마음졸이며 기다려야 했을 겁니다.</p>
<p>저희 팀은 CodePush 를 이용한 패치를 일주일 주기로 내보내고 있습니다. 어떤 주는 UI 수정을 할 때도 있고, 어떤 주는 버그를 고칠때도 있습니다. 리액트 네이티브를 개발해보신 분들은 알겠지만, 일단 네이티브 의존성을 가지는 패키지들을 설치해두기만 하면 개발의 80% 이상은 JS/TS 를 이용하여 만들어 나갈 수 있습니다. 때문에 네이티브 패키지가 이미 심어져 있기만 하다면 아무리 복잡한 컴포넌트를 수정하는 일도 문제가 없습니다.</p>
<p>Microsoft Azure 를 기반으로 운영되기때문에 배포도 꽤나 빨라서 LTE 환경에서 30MB 정도 되는 번들을 받는데 2~3초면 충분합니다. 다만, 유일한 흠은 Microsoft AppCenter 서버가 종종 아프다는 것 정도가 되겠습니다.</p>
<p>구성이 조금 복잡해 보이지만, 그래도 CodePush 가 선녀임에는 틀림없습니다.</p>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/AppCenter/" rel="tag">AppCenter</a> <a class="tag tag--primary tag--small t-link" href="/tags/CodePush/" rel="tag">CodePush</a> <a class="tag tag--primary tag--small t-link" href="/tags/React/" rel="tag">React</a> <a class="tag tag--primary tag--small t-link" href="/tags/React-Native/" rel="tag">React Native</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-1/" data-tooltip="React Native 버그픽스 3분완성 [코드푸시 맛] - 1" aria-label="이전: React Native 버그픽스 3분완성 [코드푸시 맛] - 1">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2021/06/02/Redux-Persist-persistStore-type-%EC%97%90%EB%9F%AC-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0/" data-tooltip="Redux-Persist - persistStore type 에러 해결하기" aria-label="다음: Redux-Persist - persistStore type 에러 해결하기">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="이 포스트 공유하기">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" title="Facebook에 공유하기" aria-label="Facebook에 공유하기" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" title="Twitter에 공유하기" aria-label="Twitter에 공유하기" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" title="Google+에 공유하기" aria-label="Google+에 공유하기" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="댓글을 남겨주세요">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 zerogyun. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-1/" data-tooltip="React Native 버그픽스 3분완성 [코드푸시 맛] - 1" aria-label="이전: React Native 버그픽스 3분완성 [코드푸시 맛] - 1">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2021/06/02/Redux-Persist-persistStore-type-%EC%97%90%EB%9F%AC-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0/" data-tooltip="Redux-Persist - persistStore type 에러 해결하기" aria-label="다음: Redux-Persist - persistStore type 에러 해결하기">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="이 포스트 공유하기">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" title="Facebook에 공유하기" aria-label="Facebook에 공유하기" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" title="Twitter에 공유하기" aria-label="Twitter에 공유하기" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://plus.google.com/share?url=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" title="Google+에 공유하기" aria-label="Google+에 공유하기" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="댓글을 남겨주세요">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="2">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" aria-label="Facebook에 공유하기" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://twitter.com/intent/tweet?text=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" aria-label="Twitter에 공유하기" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://plus.google.com/share?url=https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/" aria-label="Google+에 공유하기" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://avatars1.githubusercontent.com/u/29659112?s=460&amp;v=4" alt="저자 이미지">
        
            <h4 id="about-card-name">zerogyun</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Seoul, South Korea
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://user-images.githubusercontent.com/29659112/76057866-1e009100-5fbe-11ea-84fe-00462e469e66.png');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-yx1nll0dnccr4t7jryjtxngf5anbn6xbalhxl7d0ggf2bqjrgn3pqrwiyxpk.min.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://zerogyun.dev/2021/07/15/React-Native-%EB%B2%84%EA%B7%B8%ED%94%BD%EC%8A%A4-3%EB%B6%84%EC%99%84%EC%84%B1-%EC%BD%94%EB%93%9C%ED%91%B8%EC%8B%9C-%EB%A7%9B-2/';
              
            this.page.identifier = '2021/07/15/React-Native-버그픽스-3분완성-코드푸시-맛-2/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'cxz7720-github-io-1';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
